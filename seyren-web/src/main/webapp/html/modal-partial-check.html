<div class="modal-dialog" ng-controller="CheckEditModalController">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h3 class="modal-title" ng-show="newCheck"><strong>Create check</strong></h3>
            <h3 class="modal-title" ng-hide="newCheck"><strong>Edit check</strong></h3>
        </div>
        <div class="modal-body">
            <form name="checkForm" class="form-horizontal" role="form" novalidate>
                <fieldset>

                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.type'].$invalid }">
                        <label class="col-sm-3 control-label" for="check.typeoutlier">Type</label>
                        <div class="col-sm-9">
                            <input type="radio" id="check.typeoutlier" name="check.type" ng-model="check.type" value="outlier" ng-checked="check.type=='outlier'"  >Outlier <sup><span
                                id="check.typeoutlier.hint" class="glyphicon glyphicon-question-sign glyphicon-blue"></span></sup><br>
                            <input type="radio" id="check.typethreshold" name="check.type" ng-model="check.type" value="threshold" ng-checked="check.type=='threshold'">Threshold<br>

                        </div>
                    </div>

                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.name'].$invalid }">
                        <label class="col-sm-3 control-label" for="check.name">Name</label>
                        <div class="col-sm-9">
                            <input id="check.name" class="form-control" name="check.name" ng-model="check.name" type="text" required />
                        </div>
                    </div>
                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.description'].$invalid }">
                        <label class="col-sm-3 control-label" for="check.description">Description</label>
                        <div class="col-sm-9">
                            <textarea id="check.description" class="form-control" name="check.description"
                                      ng-model="check.description"></textarea>
                        </div>
                    </div>
                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.graphiteBaseUrl'].$invalid }">
                        <label class="col-sm-3 control-label" for="check.graphiteBaseUrl">Graphite Base Url</label>
                        <div class="col-sm-9">
                            <input id="check.graphiteBaseUrl" class="form-control" name="check.graphiteBaseUrl" ng-model="check.graphiteBaseUrl" type="text" required />
                        </div>
                    </div>
                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.target'].$invalid }">
                        <label class="col-sm-3 control-label" for="check.target">Target <sup><span
                                id="check.target.hint" class="glyphicon glyphicon-question-sign glyphicon-blue"></span></sup></label>
                        <div class="col-sm-9">
                        <textarea id="check.target" class="form-control"  name="check.target" ng-model="check.target"
                                  required></textarea>
                        </div>
                    </div>
                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.from'].$invalid }">
                        <label class="col-sm-3 control-label" for="check.from">From <sup><span
                                id="check.from.hint" class="glyphicon glyphicon-question-sign glyphicon-blue"
                                style="cursor: pointer;"></span></sup></label>
                        <div class="col-sm-9">
                            <input id="check.from" class="form-control" name="check.from" ng-model="check.from" type="text" />
                        </div>
                    </div>
                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.until'].$invalid }">
                        <label class="col-sm-3 control-label" for="check.until">Until</label>
                        <div class="col-sm-9">
                            <input id="check.until" class="form-control" name="check.until" ng-model="check.until" type="text" />
                        </div>
                    </div>
                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.warn'].$invalid }" ng-hide = "check.type=='outlier'" id="warnlevelmodaldiv">
                        <label class="col-sm-3 control-label" for="check.warn">Warn level <sup><span
                                id="check.warn.hint" class="glyphicon glyphicon-question-sign glyphicon-blue"></span></sup></label>
                        <div class="col-sm-9">
                            <input id="check.warn" class="form-control" name="check.warn" ng-model="check.warn" type="text" ng-pattern="/^-?[0-9]+(.[0-9]+)?$/" ng-required = "check.type=='threshold'" />
                        </div>
                    </div>

                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.error'].$invalid }" id="errorlevelmodaldiv" ng-hide = "check.type=='outlier'">
                        <label class="col-sm-3 control-label" for="check.error">Error level</label>
                        <div class="col-sm-9">
                            <input id="check.error" class="form-control" name="check.error" ng-model="check.error" type="text" ng-pattern="/^-?[0-9]+(.[0-9]+)?$/" ng-required = "check.type=='threshold'" />
                        </div>
                    </div>

                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.absoluteDiff'].$invalid }" id="absolutediffmodaldiv" ng-hide = "check.type=='threshold'">
                        <label class="col-sm-3 control-label" for="check.error">Absolute Diff</label>
                        <div class="col-sm-9">
                            <input id="check.absoluteDiff" class="form-control" name="check.absoluteDiff" ng-model="check.absoluteDiff" type="text" ng-pattern="/^-?[0-9]+(.[0-9]+)?$/" ng-required = "check.type=='outlier'" />
                        </div>
                    </div>

                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.relativeDiff'].$invalid }" id="relativediffmodaldiv" ng-hide = "check.type=='threshold'">
                        <label class="col-sm-3 control-label" for="check.error">Relative Diff</label>
                        <div class="col-sm-9">
                            <input id="check.relativeDiff" class="form-control" name="check.relativeDiff" ng-model="check.relativeDiff" type="text" ng-pattern="/^-?[0-9]+(.[0-9]+)?$/" ng-required = "check.type=='outlier'" />
                        </div>
                    </div>

                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.minConsecutiveViolations'].$invalid }" id="minconsecutivecheckmodaldiv" ng-hide = "check.type=='threshold'">
                        <label class="col-sm-3 control-label" for="check.minConsecutiveViolations">Min Consecutive Violations</label>
                        <div class="col-sm-9">
                            <input id="check.minConsecutiveViolations" class="form-control" name="check.minConsecutiveViolations" ng-model="check.minConsecutiveViolations" type="text" ng-pattern="/^-?[0-9]+(.[0-9]+)?$/" ng-required = "check.type=='outlier'" />
                        </div>
                    </div>

                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.asgName'].$invalid }" id="asgnamemodaldiv" ng-hide = "check.type=='threshold'" >
                        <label class="col-sm-3 control-label" for="check.asgName">ASG Name</label>
                        <div class="col-sm-9">
                            <input id="check.asgName" class="form-control" name="check.asgName" ng-model="check.asgName" type="text" ng-required = "check.type=='outlier'" />
                        </div>
                    </div>

                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.enabled'].$invalid }">
                        <label class="col-sm-3 control-label" for="check.enabled">Enabled</label>
                        <div class="col-sm-1">
                            <label class="checkbox inline">
                                <input id="check.enabled" name="check.enabled" ng-model="check.enabled" type="checkbox" ng-checked="check.enabled">
                            </label>
                        </div>
                    </div>
                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.live'].$invalid }" ng-show="liveEnabled()">
                        <label class="col-sm-3 control-label" for="check.live">Live</label>
                        <div class="col-sm-1">
                            <label class="checkbox inline">
                                <input id="check.live" name="check.live" ng-model="check.live" type="checkbox" ng-checked="check.live">
                            </label>
                        </div>
                    </div>
                    <div ng-class="{ 'form-group': true, 'has-error': checkForm['check.allowNoData'].$invalid }" ng-hide = "check.type=='outlier'">
                        <label class="col-sm-3 control-label" for="check.allowNoData">Allow no data</label>
                        <div class="col-sm-1">
                            <label class="checkbox inline">
                                <input id="check.allowNoData" name="check.allowNoData" ng-model="check.allowNoData" type="checkbox" ng-checked="check.allowNoData">
                            </label>
                        </div>
                    </div>
                    <div class="form-group" ng-hide = "check.type=='outlier'">
                        <label class="col-sm-3 control-label" for="check.enableConsecutiveChecks">Enable Consecutive Checks:</label>
                        <div class="col-sm-1">
                            <label class="checkbox inline">
                                <input id="check.enableConsecutiveChecks" name="check.enableConsecutiveChecks" ng-model="check.enableConsecutiveChecks" type="checkbox" ng-checked="check.enableConsecutiveChecks">
                            </label>
                        </div>
                    </div>
                    <div ng-class="{ 'form-group': true, 'has-error': ! check.consecutiveChecks && check.enableConsecutiveChecks }" ng-hide = "check.type=='outlier'">
                        <label class="col-sm-3 control-label" for="check.consecutiveChecks">Consecutive Checks:</label>
                        <div class="col-sm-9">
                            <input id="check.consecutiveChecks" class="form-control" name="check.consecutiveChecks"  ng-model="check.consecutiveChecks" ng-disabled = "! check.enableConsecutiveChecks" type="text" />
                        </div>
                    </div>
                    <div ng-class="{ 'form-group': true, 'has-error': ! check.consecutiveChecksTolerance && check.enableConsecutiveChecks  }" ng-hide = "check.type=='outlier'">
                        <label class="col-sm-3 control-label" for="check.consecutiveChecksTolerance">Tolerance Level Percentage(1-100):</label>
                        <div class="col-sm-9">
                            <input id="check.consecutiveChecksTolerance" class="form-control" name="check.consecutiveChecksTolerance" ng-model="check.consecutiveChecksTolerance" ng-disabled = "! check.enableConsecutiveChecks" type="text" />
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-9 col-sm-offset-3">
                            <img ng-src="{{ check.previewImage }}" src="./img/preview-nodata.png" width="300" height="70" />
                            Metrics found: {{ check.totalMetric }}
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn pull-left" data-dismiss="modal" id="cancelCheckButton" ng-click="reset()"><i class="glyphicon glyphicon-remove"></i>&nbsp;&nbsp;Cancel</button>
            <button type="submit" class="btn btn-primary" ng-show="newCheck" id="createCheckButton" ng-click="create()" ng-disabled="checkForm.$invalid"><i class="glyphicon glyphicon-ok glyphicon-white"></i>&nbsp;&nbsp;Create check</button>
            <button type="submit" class="btn btn-primary" ng-hide="newCheck" id="updateCheckButton" ng-click="update()" ng-disabled="checkForm.$invalid"><i class="glyphicon glyphicon-ok glyphicon-white"></i>&nbsp;&nbsp;Save changes</button>
        </div>
    </div>
</div>
